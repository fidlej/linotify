<%inherit file="base.html"/>

<table>
<tr><th>Name</th></tr>
%for server in servers:
    <tr><td><a href="/my/servers/view/${server.id()}" title="View the server">${server.name}</a></td></tr>
%endfor%
</table>

<form method="post" action="/my/servers/add">
<p>
    <input type="hidden" name="_csrf" value="${ensure_csrf_token()}"/>
    <input type="text" name="name"/>
    <input type="submit" value="Add Server"/>
</p>
</form>

<%def name="script()">
${parent.script()}
## Setting cookie tz=offset_seconds.
<script type="text/javascript">
// <![CDATA[
(function() {
var setCookie = function(name, value, days) {
    var date = new Date();
    date.setTime(date.getTime() + days*24*3600*1000);
    var expires = "; expires=" + date.toUTCString();
    document.cookie = [name, "=", encodeURIComponent(value), expires, "; path=/"].join('');
};

var getCookie = function(name) {
    if (!document.cookie || document.cookie == '') {
        return undefined;
    }

    var nameEQ = name + '=';
    var cookies = document.cookie.split(';');
    for (var i = 0, item; item = cookies[i]; i++) {
        item = item.replace(/^ +/, '');
        if (item.indexOf(nameEQ) == 0) {
            return window.decodeURIComponent(item.substring(nameEQ.length));
        }
    }
    return undefined;
}


var tz = getCookie('tz');
if (!/p$/.test(tz)) {
    tz = new Date().getTimezoneOffset();
}
setCookie('tz', tz, 365);
})();
// ]]>
</script>
</%def>


